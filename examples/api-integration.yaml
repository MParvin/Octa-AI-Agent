name: "API Integration Workflow"
description: "Fetches external data and creates processed reports"
version: "1.0"
nodes:
  - id: "fetch_user_profile"
    type: "httprequest"
    inputs_from_workflow:
      url: "https://jsonplaceholder.typicode.com/users/{{.WorkflowData.user_id}}"
      method: "GET"
      headers:
        Accept: "application/json"
        User-Agent: "Go-AI-Agent-V1"
      timeout: 10
  - id: "fetch_user_posts"
    type: "httprequest"
    inputs_from_workflow:
      url: "https://jsonplaceholder.typicode.com/users/{{.WorkflowData.user_id}}/posts"
      method: "GET"
      headers:
        Accept: "application/json"
      timeout: 10
  - id: "create_detailed_report"
    type: "writefile-json"
    inputs_from_workflow:
      path: "{{.WorkflowData.output_dir}}/user_{{.WorkflowData.user_id}}_detailed_report.txt"
      mode: "create"
      mkdir_all: true
      content: |
        User Profile and Posts Report
        =============================
        
        Generated: {{.WorkflowData.timestamp}}
        User ID: {{.WorkflowData.user_id}}
        
        API Status:
        - Profile Request: HTTP {{.Nodes.fetch_user_profile.Output.status_code}}
        - Posts Request: HTTP {{.Nodes.fetch_user_posts.Output.status_code}}
        
        Profile Status: {{.Nodes.fetch_user_profile.Output.message}}
        Posts Status: {{.Nodes.fetch_user_posts.Output.message}}
        
        Report generated by Go AI Agent V1.0
  - id: "send_webhook_notification"
    type: "httprequest"
    inputs_from_workflow:
      url: "https://httpbin.org/post"
      method: "POST"
      headers:
        Content-Type: "application/json"
      body: |
        {
          "event": "report_generated",
          "user_id": "{{.WorkflowData.user_id}}",
          "timestamp": "{{.WorkflowData.timestamp}}",
          "file_path": "{{.Nodes.create_detailed_report.Output.path}}"
        }
